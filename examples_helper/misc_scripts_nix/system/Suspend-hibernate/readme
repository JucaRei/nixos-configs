I found a post about [suspending and then going into hibernate](http://askubuntu.com/a/33192) that included a really clever script.  Turns out that with NixOS this is even esaier to coordinate as you have systemd so can have a `before` and `after` service.  I just include this in my `/etc/nixos/configuration.nix` file and `nixos-rebuild`; then a `systemctl suspend` or a close of the lid will cause the hibernate timer to be set.